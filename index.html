<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Javascript 3D Model Viewer</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: black;
        font-family: Arial, sans-serif;
      }
      #viewer {
        width: 100%; 
        height: 100vh; /* Full-screen height */
        background: #000;
      }
      .center {
        text-align: center;
        color: white;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      #progress-container {
        width: 60%;
        margin: 10px auto;
        background: #444;
        height: 20px;
        border-radius: 10px;
        overflow: hidden;
      }
      #progress-bar {
        height: 100%;
        width: 0%;
        background: #3CB371;
        transition: width 0.1s ease;
      }
    </style>
  </head>

  <body>
    <!-- Viewer -->
    <div id="viewer"></div>

    <!-- Loader -->
    <div id="loading-status" class="center">
      <div id="progress-container">
        <div id="progress-bar"></div>
      </div>
      <span id="loading-text">Loading...</span>
    </div>

    <script src="./dist/js-3d-model-viewer.js"></script>
    <script>
      var modelPlayer = this.Js3dModelViewer;
      var viewerElement = document.getElementById('viewer');
      var loadingStatus = document.getElementById('loading-status');
      var progressBar = document.getElementById('progress-bar');
      var loadingText = document.getElementById('loading-text');

      // Initialize the viewer
      var scene = modelPlayer.prepareScene(viewerElement, {
        grid: true,
        background: 'rgb(80, 80, 80)', // Background color
      });

      // Show progress during loading
      function showLoadingProgress(loaded, total) {
        var progress = Math.floor((loaded / total) * 100);
        progressBar.style.width = progress + '%';
        loadingText.innerText = 'Loading... ' + progress + '%';
      }

      // Hide loader after loading is complete
      function hideLoader() {
        loadingStatus.style.display = 'none';
      }

      // Load Sample 2 model automatically
      modelPlayer.loadObject(
        scene,
        './assets/sample_02.obj', // Path to model
        './assets/sample_02.mtl', // Path to material
        function onProgress(loaded, total) {
          showLoadingProgress(loaded, total); // Update progress
        },
        function onComplete() {
          hideLoader(); // Hide loader when done
        }
      );

      // Fullscreen mode on 'f' keypress
      document.addEventListener('keydown', function (event) {
        if (event.key === 'f') {
          modelPlayer.goFullScreen(viewerElement);
        }
      });
    </script>
  </body>
</html>
